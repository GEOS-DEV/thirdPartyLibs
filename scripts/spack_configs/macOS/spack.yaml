spack:
  config:
    install_tree:
      root: $spack/..
      projections:
        all: '{compiler.name}-{compiler.version}/{name}-{version}-{hash}'
    misc_cache: $spack/../misc_cache
    test_stage: $spack/../test_stage
    build_stage:
    - $spack/../build_stage

  # Regular TPLs do not need views
  view: false

  compilers:
    - compiler:
        spec: apple-clang@16.0.0
        paths:
          cc: /usr/bin/clang
          cxx: /usr/bin/clang++
          f77: /opt/homebrew/bin/gfortran 
          fc: /opt/homebrew/bin/gfortran  
        flags:
          cflags:
          cxxflags:
          fflags:
        operating_system: sequoia
        target: aarch64
        modules: []
        environment:
          set: # Needed for scotch
            BISON: bison
            FLEX: flex
        extra_rpaths: []
    - compiler:
        spec: apple-clang@15.0.0
        paths:
          cc: /usr/bin/clang
          cxx: /usr/bin/clang++
          f77: /opt/homebrew/bin/gfortran
          fc: /opt/homebrew/bin/gfortran 
        flags:
          cflags:
          cxxflags:
          fflags:
        operating_system: sonoma
        target: aarch64
        modules: []
        environment:
          set: # Needed for scotch
            BISON: bison
            FLEX: flex
        extra_rpaths: []
    

  packages:
    all:
      target: [aarch64]
      compiler: [apple-clang]
      providers:
        mpi: [openmpi]
        blas: [netlib-lapack]
        lapack: [netlib-lapack]


    # master - 10/18/24
    hypre:
      require: "@git.c893886d15eb57e87dd36efec23693ece3ddc88e"

    superlu-dist:
      require: "@git.0f6efc377df2440c235452d13d28d2c717f832a1"

    # Lock down which MPI we are using
    openmpi:
      buildable: False
      externals:
        - spec: openmpi@5.0.6
          prefix: /opt/homebrew/opt/open-mpi

    # System level packages to not build
    cmake:
      version: [3.29.6]
      buildable: false
      externals:
        - spec: cmake@3.29.6
          prefix: /opt/homebrew/opt/cmake
    readline:
      buildable: false
      externals:
      - spec: readline@8.2.13
        prefix: /opt/homebrew/opt/readline
      
    m4:
      buildable: False
      externals:
        - spec: m4@1.4.6
          prefix: /opt/homebrew/opt/m4
    perl:
      buildable: false
      externals:
      - spec: perl@5.34.1
        prefix: /opt/homebrew/opt/perl
    pkg-config:
      buildable: false
      externals:
      - spec: pkg-config@2.3.0
        prefix: /opt/homebrew/opt/pkgconf
    diffutils:
      buildable: False
      externals:
        - spec: diffutils@3.11
          prefix: /opt/homebrew/opt/diffutils

    autoconf:
      buildable: False
      externals:
        - spec: autoconf@2.72
          prefix: /opt/homebrew/opt/autoconf
    automake:
      buildable: False
      externals:
        - spec: automake@1.17
          prefix: /opt/homebrew/opt/automake
    libtool:
      buildable: False
      externals:
        - spec: libtool@2.5.4
          prefix: /opt/homebrew/opt/libtool
    gettext:
      buildable: False
      externals:
        - spec: gettext@0.23.1 
          prefix: /opt/homebrew/opt/gettext
    flex:
      buildable: False
      externals:
        - spec: flex@2.6.4
          prefix: /opt/homebrew/opt/flex

    addr2line:
      buildable: False
      externals:
        - spec: addr2line@2.43.1
          prefix: /opt/homebrew/opt/binutils
    
    zlib:
      buildable: False
      externals:
        - spec: zlib@1.3.1
          prefix: /opt/homebrew/opt/zlib 

    python:
      buildable: false
      externals:
        - spec: python@3.13.2
          prefix: /opt/homebrew/opt/python@3.13                    